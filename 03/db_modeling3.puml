@startuml
'03_DBモデリング3

entity users {
  + id [PK]
  --
  name
  is_delete
}

entity user_directory {
  + id [PK]
  --
  user_id
  directory_id
  is_delete
}

entity directory {
  + id [PK]
  --
  name
  is_delete
}

entity directory_relation {
  + id [PK]
  --
  ancestor
  descendant
}

entity document {
  + id [PK]
  --
  name
  content
  directory_id
  user_id
  is_delete
}

entity document_history {
  + id [PK]
  --
  name
  content
  document_id
  directory_id
  user_id
  is_delete
}

users      --|{ user_directory
directory  --|{ user_directory
users  --|{ document
directory  --|{ document
users  --|{ document_history
directory  --|{ document_history
directory  --|{ directory_relation
document   --|{ document_history

'参考
' https://qiita.com/fktnkit/items/57033c10b41b5747dbea#%E4%BB%A3%E6%9B%BF%E3%83%84%E3%83%AA%E3%83%BC%E3%83%A2%E3%83%87%E3%83%AB

@enduml